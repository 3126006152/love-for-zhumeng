
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>給朱夢</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500&display=swap');

html,body{
  margin:0;
  width:100%;
  height:100%;
  background:linear-gradient(to bottom,#fffaf6,#f6eaea);
  font-family:"Noto Sans TC",sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* 卡片 */
#card{
  position:relative;
  background:rgba(255,255,255,0.9);
  border-radius:22px;
  padding:42px 36px;
  width:340px;
  box-shadow:0 12px 30px rgba(150,120,120,0.18);
  text-align:center;
  transition:opacity 4s ease;
}

/* 名字 */
#name{
  font-size:32px;
  letter-spacing:6px;
  margin-bottom:26px;
  color:#7a5a63;
}

/* 文字容器 */
#lineBox{
  position:relative;
  min-height:140px;
}

/* 行 */
.line{
  font-size:15px;
  line-height:1.9;
  letter-spacing:1px;
  color:#8b6a73;
  opacity:0;
  transition:opacity 2s ease;
  margin-bottom:14px;
}

/* 單字 */
.letter{
  position:absolute;
  font-size:15px;
  color:#8b6a73;
  opacity:1;
  transition:
    left 3s ease,
    top 3s ease,
    opacity 3s ease;
}

/* 最後一句 */
#end{
  margin-top:26px;
  font-size:14px;
  letter-spacing:3px;
  color:#a88991;
  opacity:0;
  transition:opacity 2s ease;
}
</style>
</head>

<body>

<div id="card">
  <div id="name">朱　夢</div>

  <div id="lineBox">
    <div class="line">我想慢慢地，把這些話寫給妳。</div>
    <div class="line">那天第一次給你發的消息，真的只是打錯字，之後也撤回了，沒有別的意思。</div>
    <div class="line">只是我太笨，不知道該怎樣說。</div>
    <div class="line">如果讓妳覺得不被珍惜，我很抱歉。</div>
    <div class="line">這些話，也許來得晚了一點。</div>
  </div>

  <div id="end">真的，對不起。</div>
</div>

<script>
const lines=[...document.querySelectorAll('.line')];
const box=document.getElementById('lineBox');
const end=document.getElementById('end');
const card=document.getElementById('card');

let letters=[];
let delay=1000;

/* 一行一行出現 */
lines.forEach((line,i)=>{
  setTimeout(()=>line.style.opacity=1,delay+i*1800);
});

/* 拆字 */
setTimeout(()=>{
  lines.forEach(line=>{
    const rect=line.getBoundingClientRect();
    const boxRect=box.getBoundingClientRect();
    const text=line.textContent;
    line.textContent='';

    [...text].forEach((ch,i)=>{
      const span=document.createElement('span');
      span.className='letter';
      span.textContent=ch;
      span.style.left=(rect.left-boxRect.left+i*16)+'px';
      span.style.top=(rect.top-boxRect.top)+'px';
      box.appendChild(span);
      letters.push(span);
    });
  });
},11000);

/* 愛心公式 */
function heart(t){
  return [
    16*Math.pow(Math.sin(t),3),
    -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t))
  ];
}

/* 排列成愛心 */
setTimeout(()=>{
  const rect=box.getBoundingClientRect();
  const cx=rect.width/2;
  const cy=rect.height/2+10;
  const total=letters.length;

  letters.forEach((l,i)=>{
    const t=i/total*Math.PI*2;
    const [x,y]=heart(t);
    l.style.left=cx+x*6+'px';
    l.style.top=cy+y*6+'px';
  });

  end.style.opacity=1;
},16000);

/* 停留 → 合上卡片 */
setTimeout(()=>{
  card.style.opacity=0;
},24000);
</script>

</body>
</html>
